@{
    ViewBag.Title = "Complain Receive...";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- page content -->
<div id="content" ng-controller="complainReceiveController">
    <div class="right_col" role="main">
        <div class="">
            <div class="row">
                <div class="col-md-12 col-xs-12">
                    <div class="x_panel">
                        <form name="frmComplainReceive" class="form-horizontal form-label-left input_mask">
                            <div class="x_title">
                                <h2>Complain Receive</h2>
                                <div class="clearfix"></div>
                            </div>
                            <div class="x_content">
                                <div class="row">
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Currency</label>
                                            <div class="col-md-3 col-sm-3 col-xs-12">
                                                <select class="form-control" required ng-model="currencyId" ng-change="loadExchangeRate()">
                                                    <option ng-repeat="x in currencyDropDownJsonData" value="{{x.Value}}">{{x.Item}}</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                <div class="form-inline">
                                                    <div class="input-group">
                                                        <span class="input-group-addon"><strong>1&nbsp;{{selectedCurrency}}&nbsp;&equiv;</strong></span>
                                                        <input class="form-control" type="text" placeholder="Exchange rate" required name="exchangeRate" ng-model="exchangeRate" ng-disabled="isBaseCurrencySelected" positive-float-numbers-only />
                                                        <span class="input-group-addon"><strong>{{baseCurrency}}</strong></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Receive No.</label>
                                            <div class="col-md-9 col-sm-9 col-xs-12">
                                                <input class="form-control" name="complainReceiveNo" type="text" placeholder="Complain Receive No." ng-model="complainReceiveNo" ng-disabled="true" disabled="disabled" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Date *</label>
                                            <div class="col-md-4 col-sm-4 col-xs-12 xdisplay_inputx form-group has-feedback" style="margin-bottom:0px !important;">
                                                <input class="form-control datepicker" type="text" placeholder="m/d/yyyy" required name="complainReceiveDate" ng-model="complainReceiveDate" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12"></label>
                                            <div class="col-md-9 col-sm-9 col-xs-12">
                                                <div class="col-md-6 col-sm-6 col-xs-12 xdisplay_inputx form-group has-feedback">
                                                    <div class="checkbox">
                                                        <label><input type="checkbox" ng-checked="isReceiveAgainstPreviousSales" ng-click="clickReceiveAgainstPreviousSales()"><strong>Against Previous Sales</strong></label>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 col-sm-6 col-xs-12 xdisplay_inputx form-group has-feedback">
                                                    <div class="checkbox">
                                                        <label><input type="checkbox" ng-checked="isAdvanchSearch" ng-click="clickAdvanchSearch()" ng-disabled="isReceiveAgainstPreviousSales"><strong>Advance Search</strong></label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Requested By *</label>
                                            <div class="col-md-9 col-sm-9 col-xs-12">
                                                <input class="form-control" name="requestedBy" type="text" placeholder="Search by name, code or mobile no." required ng-model="requestedBy" ng-keyup="getEmployeeName()" />
                                                <ul class="list-group" style="position: absolute; z-index: 999;">
                                                    <li class="list-group-item" ng-repeat="item in employeeJsonData" ng-click="fillEmployeeTextbox(item)">{{item.Item}}</li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Remarks</label>
                                            <div class="col-md-9 col-sm-9 col-xs-12">
                                                <textarea class="form-control" cols="20" rows="3" placeholder="Complain Receive remarks" maxlength="1000" name="remarks" ng-model="remarks"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <div ng-show="isReceiveAgainstPreviousSales ||isAdvanchSearch">
                                            <div class="form-group">
                                                <label class="control-label col-md-3 col-sm-3 col-xs-12">Customer <span ng-show="isReceiveAgainstPreviousSales">*</span></label>
                                                <div class="col-md-9 col-sm-9 col-xs-12">
                                                    <input class="form-control" type="text" placeholder="Search by name, code or mobile no." required ng-model="customerName" ng-keyup="getCustomerName()" ng-disabled="isDisableCustomer" />
                                                    <ul class="list-group" style="position: absolute; z-index: 999;">
                                                        <li class="list-group-item" ng-repeat="item in customerNameJsonData" ng-click="fillCustomerTextbox(item)">{{item.Item}}</li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label col-md-3 col-sm-3 col-xs-12">Mobile No.</label>
                                                <div class="col-md-9 col-sm-9 col-xs-12">
                                                    <input class="form-control" type="text" placeholder="Search by mobile no." ng-model="customerMobileNo" ng-keyup="getCustomerNameByPhone()" ng-disabled="isDisableCustomer" />
                                                    <ul class="list-group" style="position: absolute; z-index: 999;">
                                                        <li class="list-group-item" ng-repeat="item in customerNameByPhoneJsonData" ng-click="fillCustomerTextbox(item)">{{item.Item}}</li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label col-md-3 col-sm-3 col-xs-12">Address</label>
                                                <div class="col-md-9 col-sm-9 col-xs-12">
                                                    <input class="form-control" type="text" placeholder="Search by address" ng-model="customerAddress" ng-disabled="isDisableCustomer" />
                                                </div>
                                            </div>
                                            <div class="form-group" ng-hide="isReceiveAgainstPreviousSales">
                                                <label class="control-label col-md-3 col-sm-3 col-xs-12">From </label>
                                                <div class="col-md-3 col-sm-3 col-xs-12 xdisplay_inputx form-group has-feedback" style="margin-bottom:0px !important;">
                                                    <input class="form-control datepicker" type="text" placeholder="m/d/yyyy" name="dateFrom" ng-model="dateFrom" />
                                                </div>

                                                <label class="control-label col-md-3 col-sm-3 col-xs-12">To </label>
                                                <div class="col-md-3 col-sm-3 col-xs-12 xdisplay_inputx form-group has-feedback" style="margin-bottom:0px !important;">
                                                    <input class="form-control datepicker" type="text" placeholder="m/d/yyyy" name="dateTo" ng-model="dateTo" />
                                                </div>
                                            </div>
                                            <div class="form-group" ng-hide="isReceiveAgainstPreviousSales">
                                                <label class="control-label col-md-3 col-sm-3 col-xs-12">Invoice No.</label>
                                                <div class="col-md-9 col-sm-9 col-xs-12">
                                                    <input class="form-control" type="text" placeholder="Invoice number /QR Search /Barcode Search" ng-model="invoiceNo" ng-keyup="getInvoiceNo()" />
                                                    <ul class="list-group" style="position: absolute; z-index: 999;">
                                                        <li class="list-group-item" ng-repeat="item in invoiceNoJsonData" ng-click="fillInvoiceNoTextbox(item)">{{item.Item}}</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Product <span ng-show="isReceiveAgainstPreviousSales">*</span></label>
                                            <div class="col-md-9 col-sm-9 col-xs-12 xdisplay_inputx form-group">
                                                <input class="form-control" type="text" placeholder="Search product by name or code..." ng-model="productName" ng-keyup="getProductName()" />
                                                <ul class="list-group" style="position: absolute; z-index: 999;">
                                                    <li class="list-group-item" ng-repeat="item in productNameJsonData" ng-click="fillProductTextbox(item)">{{item.Item}}</li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="form-group" ng-show="productDimensionDropDownJsonData.length > 0">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Dimension</label>
                                            <div class="col-md-9 col-sm-9 col-xs-12 xdisplay_inputx form-group">
                                                <select class="form-control" ng-model="dimensionId" ng-change="getDimensionName()">
                                                    <option ng-repeat="x in productDimensionDropDownJsonData" value="{{x.Value}}">{{x.Item}}</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">SERIAL SEARCH *</label>
                                            <div class="col-md-9 col-sm-9 col-xs-12">
                                                <input class="form-control" type="text" placeholder="Only Serial /QR Search /Barcode Search # Product" ng-model="searchProductSerial" ng-keyup="getProductSerial()" />
                                                <ul class="list-group" style="position: absolute; z-index: 999;">
                                                    <li class="list-group-item" ng-repeat="item in productSerialJsonData" ng-click="fillproductSerialTextbox(item)">{{item.Item}}</li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="form-group" ng-show="!productSerialOrNot || isReceiveAgainstPreviousSales">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12"></label>
                                            <div class="col-md-3 col-sm-3 col-xs-12">
                                                <div class="input-group">
                                                    <button type="button" class="btn btn-primary" ng-click="generateProductSerial()"><strong>Generate Serial</strong></button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Unit Type</label>
                                            <div class="col-md-3 col-sm-3 col-xs-12">
                                                <select class="form-control" required ng-model="unitTypeId" ng-change="getUnitTypeName()">
                                                    <option ng-repeat="x in unitTypeDropDownJsonData" value="{{x.Value}}">{{x.Item}}</option>
                                                </select>
                                            </div>

                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Cost/Unit</label>
                                            <div class="col-md-3 col-sm-3 col-xs-12">
                                                <div class="input-group">
                                                    <input class="form-control" type="text" placeholder="Cost/Unit" maxlength="18" name="unitCost" ng-model="unitCost" positive-float-numbers-only />
                                                    <span class="input-group-addon"><strong>{{currencyId}}</strong></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Product Remarks</label>
                                            <div class="col-md-9 col-sm-9 col-xs-12">
                                                <textarea class="form-control" cols="20" rows="3" placeholder="Product remarks" maxlength="1000" name="productRemarks" ng-model="productRemarks"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Warranty Days</label>
                                            <div class="col-md-3 col-sm-3 col-xs-12 xdisplay_inputx form-group has-feedback" style="margin-bottom:0px !important;">
                                                <input class="form-control" style="padding-right:0px" name="warrantyDays" type="text" ng-model="warrantyDays" ng-disabled="true" disabled="disabled" />
                                            </div>

                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Service Warranty Days</label>
                                            <div class="col-md-3 col-sm-3 col-xs-12 xdisplay_inputx form-group has-feedback" style="margin-bottom:0px !important;">
                                                <input class="form-control" style="padding-right:0px" name="ServiceWarrantyDays" type="text" ng-model="serviceWarrantyDays" ng-disabled="true" disabled="disabled" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Warranty Available</label>
                                            <div class="col-md-3 col-sm-3 col-xs-12 xdisplay_inputx form-group has-feedback" style="margin-bottom:0px !important;">
                                                <input class="form-control" style="padding-right:0px" name="warrantyLeft" type="text" ng-model="warrantyLeft" ng-disabled="true" disabled="disabled" />
                                            </div>

                                            <label class="control-label col-md-3 col-sm-3 col-xs-12">Service W.Available</label>
                                            <div class="col-md-3 col-sm-3 col-xs-12 xdisplay_inputx form-group has-feedback" style="margin-bottom:0px !important;">
                                                <input class="form-control" style="padding-right:0px" name="serviceWarrantyDaysAvailable" type="text" ng-model="serviceWarrantyDaysAvailable" ng-disabled="true" disabled="disabled" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12"></label>
                                            <div class="col-md-9 col-sm-9 col-xs-12 xdisplay_inputx form-group has-feedback">
                                                <div class="checkbox">
                                                    <label><input type="checkbox" ng-checked="isForServiceOnly" ng-click="clickForServiceOnly()"><strong>For Service Only</strong></label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="x_title">
                                <h2>Problem List</h2>
                                <div class="clearfix"></div>
                            </div>
                            <div class="x_content">
                                <div class="row">
                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                        <div class="form-group">
                                            <div class="col-md-12 col-sm-12 col-xs-12">
                                                <div class="dataTables_wrapper form-inline dt-bootstrap no-footer">
                                                    <div class="table-responsive">
                                                        <table class="table table-striped table-bordered dataTable no-footer" aria-describedby="datatable_info">
                                                            <thead>
                                                                <tr>
                                                                    <th style="width:20px;"></th>
                                                                    <th>Problem Detail</th>
                                                                    <th>Additional Note (If Needed)</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr ng-repeat="item in allProblemJsonLists">
                                                                    <td><input type="checkbox" ng-model="item.isSelected" /></td>
                                                                    <td>{{item.Name}}</td>
                                                                    <td><input class="form-control" style="width:100%" name="item.Note" type="text" ng-model="item.Note" /></td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                        <button type="button" class="btn btn-app" ng-disabled="!(selectedProductId > 0)" ng-click="clickToAdd()"><i class="fa fa-plus"></i>Add Product</button>
                                        <button type="button" class="btn btn-app" ng-click="clickToReset()"><i class="fa fa-refresh"></i>Reset</button>
                                    </div>
                                </div>
                            </div>
                            <div class="x_title">
                                <h2>Product Detail</h2>
                                <div class="clearfix"></div>
                            </div>
                            <div class="x_content">
                                <div class="row">
                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                        <div class="form-group">
                                            <div class="col-md-12 col-sm-12 col-xs-12">
                                                <div class="dataTables_wrapper form-inline dt-bootstrap no-footer">
                                                    <div class="table-responsive">
                                                        <table class="table table-striped table-bordered dataTable no-footer" aria-describedby="datatable_info">
                                                            <thead>
                                                                <tr>
                                                                    <th>Product Name</th>
                                                                    <th>Unit Type</th>
                                                                    <th>Serial No.</th>
                                                                    <th>Problem</th>
                                                                    <th>Spare Parts Amount ({{currencyId}})</th>
                                                                    <th>Service Charge ({{currencyId}})</th>
                                                                    <th>Amount ({{currencyId}})</th>
                                                                    <th style="width:30px;">&nbsp;</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr ng-repeat="item in addedProductLists">
                                                                    <td>
                                                                        <div class="form-group" style="width: 100%;">
                                                                            <div class="col-md-10 col-sm-10 col-xs-12"> {{item.Name}}</div>
                                                                            <!-- Button trigger modal -->
                                                                            <div class="pull-right">
                                                                                <button class="btn btn-info btn-xs" title="Add Spare Parts" style="margin-bottom: 0px;" data-toggle="modal" ng-click="clickAddSpareParts(item)" data-target="#SparePartsModal">
                                                                                    <span class="fa fa-sign-out"></span>
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                    <td>{{item.UnitTypeName}}</td>
                                                                    <td>{{item.Serial}}</td>
                                                                    <td>{{item.Problem}}</td>
                                                                    <td>{{item.SparePartsAmount}}</td>
                                                                    <td>{{item.ServiceChargeAmount}}</td>
                                                                    <td>{{item.TotalAmount}}</td>
                                                                    <td>
                                                                        <div class="pull-right">
                                                                            <button class="btn btn-info btn-xs" style="margin-bottom: 0px;" title="Delete" ng-click="clickRemoveItem(item.identity)">
                                                                                <span class="fa fa-trash-o"></span>
                                                                            </button>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-2 col-sm-2 col-xs-8 col-md-offset-8 col-sm-offset-8">Product Total ({{currencyId}}):</label>
                                            <label class="control-label col-md-2 col-sm-2 col-xs-4">{{productTotal}}</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div>
                                        <div class="col-md-6 col-sm-6 col-xs-12">
                                        </div>
                                    </div>
                                    @*Charges*@
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12"></label>
                                            <div class="col-md-9 col-sm-9 col-xs-12 xdisplay_inputx form-group has-feedback">
                                                <div class="checkbox">
                                                    <label><input type="checkbox" ng-checked="isRequiredCharges" ng-click="clickForRequiredCharges()"><strong>Other Charges</strong></label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12"></label>
                                            <div class="col-md-9 col-sm-9 col-xs-12">
                                                <div class="dataTables_wrapper form-inline dt-bootstrap no-footer">
                                                    <div class="table-responsive">
                                                        <table class="table table-striped table-bordered dataTable no-footer" aria-describedby="datatable_info" ng-hide="!isRequiredCharges">
                                                            <thead>
                                                                <tr>
                                                                    <th style="width:20px;"></th>
                                                                    <th>Charge</th>
                                                                    <th>Amount ({{currencyId}})</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr ng-repeat="item in allChargeJsonLists">
                                                                    <td><input type="checkbox" ng-model="item.isSelected" ng-change="calculatetotalServiceChargeAmount()" /></td>
                                                                    <td>{{item.Name}}</td>
                                                                    <td><input class="form-control" name="item.ChargeAmount" type="text" ng-model="item.ChargeAmount" positive-float-numbers-only ng-change="calculatetotalServiceChargeAmount()" /></td>
                                                                </tr>
                                                                <tr>
                                                                    <td></td>
                                                                    <td>Total Charges</td>
                                                                    <td>{{totalServiceChargeAmount}}</td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                                <div class="dataTables_wrapper form-inline dt-bootstrap no-footer">
                                                    <div class="table-responsive">
                                                        <table class="table table-striped table-bordered dataTable no-footer" aria-describedby="datatable_info">
                                                            <tbody>
                                                                <tr>
                                                                    <th width="40%">Grand Total ({{currencyId}}):</th>
                                                                    <td width="60%"><strong>{{grandTotal}}</strong></td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div class="ln_solid"></div>
                        <div class="col-md-12 col-sm-12 col-xs-12">
                            <button type="button" class="btn btn-app" ng-disabled="isSaved ||frmComplainReceive.$invalid" ng-click="clickToSave()"><i class="fa fa-save"></i>Save</button>
                            <button type="button" class="btn btn-app" ng-if="isSaved" ng-click="PrintReport(complainReceiveNo)"><i class="fa fa-print"></i>Print</button>
                            <a target="_self" class="btn btn-app" href="@Url.Action("ComplainReceive", "RMA")"><i class="fa fa-refresh"></i>New</a>
                            <a target="_self" class="btn btn-app" href="@Url.Action("Index", "Home")"><i class="fa fa-close"></i>Close</a>
                        </div>
                    </div>
                    <div class="x_panel">
                        <div class="x_title">
                            <h2>Lists</h2>
                            <div class="clearfix"></div>
                        </div>
                        <div class="x_content">
                            <div class="dataTables_wrapper form-inline dt-bootstrap no-footer">
                                <div class="row">
                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                        <input class="form-control" style="width:100%;" type="text" placeholder="Search by Complain Receive No., Customer Name, Code or Contact No ..." name="searchComplainReceive" ng-model="searchComplainReceive" ng-change="filterComplainReceive()" />
                                    </div>
                                </div>
                                <div class="row" style="margin-top: 6px !important;">
                                    <div class="col-md-7 col-sm-12 col-xs-12">
                                        <div class="dataTables_info" role="status" aria-live="polite">{{showRecordsInfo}}</div>
                                    </div>
                                    <div class="col-md-5 col-sm-12 col-xs-12" ng-show="showGrid">
                                        <div class="dataTables_paginate paging_simple_numbers">
                                            <ul class="pagination">
                                                <li class="paginate_button previous" ng-class="pageIndex > 1 ? 'active' : 'disabled'">
                                                    <a href="#" aria-controls="datatable" ng-click="previous($event)"><i class="fa fa-arrow-circle-left"></i> Previous</a>
                                                </li>
                                                <li class="paginate_button next" ng-class="pageIndex < allComplainReceiveJsonLists.LastPageNo ? 'active' : 'disabled'">
                                                    <a href="#" aria-controls="datatable" ng-click="next($event)">Next <i class="fa fa-arrow-circle-right"></i></a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="row" ng-show="showGrid">
                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-bordered dataTable no-footer" role="grid" aria-describedby="datatable_info">
                                                <thead>
                                                    <tr>
                                                        <th>Date</th>
                                                        <th>Complain Receive No.</th>
                                                        <th>Code</th>
                                                        <th>Customer/Buyer</th>
                                                        <th>Contact No</th>
                                                        <th>Service Amount</th>
                                                        <th>&nbsp;</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="item in allComplainReceiveJsonLists.Data">
                                                        <td>{{item.ReceiveDate | date : 'dd-MMM-yyyy'}}</td>
                                                        <td>{{item.ReceiveNo}}</td>
                                                        <td>{{item.CustomerCode}}</td>
                                                        <td>{{item.CustomerName}}</td>
                                                        <td>{{item.CustomerPhoneNo}}</td>
                                                        <td>{{item.TotalChargeAmount}}</td>
                                                        <td>
                                                            <div class="pull-right">
                                                                <button ng-click="PrintReport(item.ReceiveId)" class="btn btn-info btn-xs" style="margin-bottom: 0px;" title="Print">
                                                                    <span class="fa fa-print"></span>
                                                                </button>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal Spare product-->
        <div class="modal fade" id="SparePartsModal" tabindex="-1" role="dialog" aria-labelledby="SparePartsModalTitle" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="SparePartsModalTitle">Spare Product</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form name="frmComplainReceiveSpareparts" class="form-horizontal form-label-left input_mask">
                            <div class="row">
                                <div class="col-md-12 col-xs-12">
                                    <div class="x_content">
                                        <div class="row">
                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                <div class="form-group">
                                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Received Product</label>
                                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                                        <input class="form-control" name="productNameForSparePart" type="text" placeholder="Show product Name" ng-model="productNameForSparePart" ng-disabled="true" disabled="disabled" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                <div class="form-group">
                                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Received Product Serial</label>
                                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                                        <input class="form-control" name="productSerialForSparePart" type="text" placeholder="Show product Serial" ng-model="productSerialForSparePart" ng-disabled="true" disabled="disabled" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                <div class="form-group">
                                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Spare Product</label>
                                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                                        <input class="form-control" type="text" placeholder="Search product by name or code..." ng-model="spareProductName" ng-keyup="getSpareProductName()" />
                                                        <ul class="list-group" style="position: absolute; z-index: 999;">
                                                            <li class="list-group-item" ng-repeat="item in spareProductNameJsonData" ng-click="fillSpareProductTextbox(item)">{{item.Item}}</li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Available</label>
                                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                                        <div class="input-group">
                                                            <input class="form-control" type="text" placeholder="Available Stock" maxlength="18" name="availableStock" ng-model="availableStock" positive-float-numbers-only />
                                                            <span class="input-group-addon"><strong>{{unitTypeName}}</strong></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Add Spare Type</label>
                                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                                        <select class="form-control" required ng-model="spareTypeId" ng-change="getSpareTypeName()">
                                                            <option ng-repeat="x in spareTypeDropDownJsonData" value="{{x.Value}}">{{x.Item}}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Product Remarks</label>
                                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                                        <textarea class="form-control" cols="20" rows="3" placeholder="Product remarks" maxlength="1000" name="spareProductremarks" ng-model="spareProductremarks"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                <div class="form-group">
                                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Unit Type</label>
                                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                                        <select class="form-control" required ng-model="spareUnitTypeId" ng-change="getSpareUnitTypeName()">
                                                            <option ng-repeat="x in unitTypeDropDownJsonData" value="{{x.Value}}">{{x.Item}}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Quantity</label>
                                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                                        <div class="input-group">
                                                            <input class="form-control" type="text" placeholder="Quantity" maxlength="18" name="spareQuantity" ng-model="spareQuantity" positive-float-numbers-only />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Price/Unit</label>
                                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                                        <div class="input-group">
                                                            <input class="form-control" type="text" placeholder="Cost/Unit" maxlength="18" name="unitCost" ng-model="spareUnitCost" positive-float-numbers-only />
                                                            <span class="input-group-addon"><strong>{{currencyId}}</strong></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">Discount/Unit</label>
                                                    <div class="col-md-9 col-sm-9 col-xs-12">
                                                        <div class="input-group">
                                                            <input class="form-control" type="text" placeholder="Discount/Unit" maxlength="18" name="spareUnitDiscount" ng-model="spareDiscount" positive-float-numbers-only />
                                                            <span class="input-group-addon"><strong>{{currencyId}}</strong></span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12 col-sm-12 col-xs-12">
                                                <div class="form-group">
                                                    <div class="col-md-3 col-sm-3 col-xs-12" style="text-align:left">
                                                        <button type="button" class="btn btn-app" ng-disabled="!(selectedProductId > 0)" ng-click="clickToAddSpareProduct()"><i class="fa fa-plus"></i>Add Product</button>
                                                        <button type="button" class="btn btn-app" ng-click="clickToResetSpareProduct()"><i class="fa fa-refresh"></i>Reset</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="x_title">
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12 col-sm-12 col-xs-12">
                                                <div class="form-group">
                                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                                        <div class="dataTables_wrapper form-inline dt-bootstrap no-footer">
                                                            <div class="table-responsive">
                                                                <table class="table table-striped table-bordered dataTable no-footer" aria-describedby="datatable_info">
                                                                    <thead>
                                                                        <tr>
                                                                            <th>Product Name</th>
                                                                            <td>Remarks</td>
                                                                            <th>Quantity</th>
                                                                            <th>Unit Type</th>
                                                                            <th>Price/Unit</th>
                                                                            <th>Discount/Unit</th>
                                                                            <th>Total</th>
                                                                            <th style="border: 1px dotted black;width:30px;">&nbsp;</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr style="background-color:deepskyblue"><td><strong>Spare Parts</strong></td></tr>
                                                                        <tr ng-repeat="item in productWiseSpareProductList">
                                                                            <td>{{item.Name}}</td>
                                                                            <td>{{item.Remarks}}</td>
                                                                            <td>{{item.Quantity}}</td>
                                                                            <td>{{item.UnitTypeName}}</td>
                                                                            <td>{{item.Price}}</td>
                                                                            <td>{{item.Discount}}</td>
                                                                            <td>{{item.TotalAmount}}</td>
                                                                            <td style="border: 1px dotted black;">
                                                                                <div class="pull-right">
                                                                                    <button class="btn btn-info btn-xs" style="margin-bottom: 0px;" title="Delete" ng-click="clickRemoveSpareItem(item.identity)">
                                                                                        <span class="fa fa-trash-o"></span>
                                                                                    </button>
                                                                                </div>
                                                                            </td>
                                                                        </tr>
                                                                        <tr ng-show="productWiseSpareProductList.length >0">
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td>Total</td>
                                                                            <td>{{totalSpareProductAmount}}&nbsp; {{currencyId}}</td>
                                                                            <td></td>
                                                                        </tr>
                                                                        <tr style="background-color:deepskyblue"><td><strong>Services</strong></td></tr>
                                                                        <tr ng-repeat="item in productWiseServiceProductList">
                                                                            <td>{{item.Name}}</td>
                                                                            <td>{{item.Remarks}}</td>
                                                                            <td>{{item.Quantity}}</td>
                                                                            <td>{{item.UnitTypeName}}</td>
                                                                            <td>{{item.Price}}</td>
                                                                            <td>{{item.Discount}}</td>
                                                                            <td>{{item.TotalAmount}}</td>
                                                                            <td style="border: 1px dotted black;">
                                                                                <div class="pull-right">
                                                                                    <button class="btn btn-info btn-xs" style="margin-bottom: 0px;" title="Delete" ng-click="clickRemoveSpareItem(item.identity)">
                                                                                        <span class="fa fa-trash-o"></span>
                                                                                    </button>
                                                                                </div>
                                                                            </td>
                                                                        </tr>
                                                                        <tr ng-show="productWiseServiceProductList.length >0">
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td>Total</td>
                                                                            <td>{{totalServiceProductAmount}}&nbsp; {{currencyId}}</td>
                                                                            <td></td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Done</button>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- /page content -->

@section scripts{

    <script src="~/Scripts/ngControllers/task/RMA/complainReceiveController.js?reload=@DateTime.Now.Date.ToShortDateString()"></script>
    <script src="~/Scripts/ngDirectives/float-only-positive-numbers.js"></script>
    <script src="~/Scripts/ngServices/common/currencyCommonService.js?reload=@DateTime.Now.Date.ToShortDateString()"></script>
    <script src="~/Scripts/ngServices/common/employeeCommonService.js?reload=@DateTime.Now.Date.ToShortDateString()"></script>
    <script src="~/Scripts/ngServices/common/productCommonService.js?reload=@DateTime.Now.Date.ToShortDateString()"></script>
    <script src="~/Scripts/ngServices/common/stockTypeCommonService.js?reload=@DateTime.Now.Date.ToShortDateString()"></script>
    <script src="~/Scripts/ngServices/common/chargeSetupService.js?reload=@DateTime.Now.Date.ToShortDateString()"></script>
    <script src="~/Scripts/ngServices/common/invoiceCommonService.js?reload=@DateTime.Now.Date.ToShortDateString()"></script>
    <script src="~/Scripts/ngServices/common/customerCommonService.js?reload=@DateTime.Now.Date.ToShortDateString()"></script>
    <script src="~/Scripts/ngServices/task/RMA/complainReceiveService.js?reload=@DateTime.Now.Date.ToShortDateString()"></script>
    <script src="~/Scripts/ngServices/setup/problemSetup/problemSetupService.js?reload=@DateTime.Now.Date.ToShortDateString()"></script>
    <script src="~/Scripts/bootstrap-datepicker.min.js"></script>
    <script>
        $('input.datepicker').datepicker({
            format: 'm/d/yyyy'
        });
    </script>
}